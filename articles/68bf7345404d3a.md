---
title: "ABC239 D - Prime Sum Game C++è§£ç­”ä¾‹"
emoji: "ğŸŒŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "ç«¶ãƒ—ãƒ­", "cpp", "AtCoder"]
published: true
---

AtCoder Beginner Contest 239 D - Prime Sum Game ã‚’ C++ã§è§£ãã¾ã™ã€‚

## å•é¡Œ

å•é¡Œæ–‡ã‚’[AtCoder ã®ãƒšãƒ¼ã‚¸](https://atcoder.jp/contests/abc239/tasks/abc239_d)ã‚ˆã‚Šå¼•ç”¨ã—ã¾ã™ã€‚

### å•é¡Œæ–‡

> é«˜æ©‹å›ã¨é’æœ¨å›ãŒæ¬¡ã®ã‚ˆã†ãªã‚²ãƒ¼ãƒ ã‚’ã—ã¾ã™ã€‚
>
> - ã¾ãšã€é«˜æ©‹å›ãŒ$A$ä»¥ä¸Š$B$ä»¥ä¸‹ã®å¥½ããªæ•´æ•°ã‚’é¸ã³ã€é’æœ¨å›ã«ä¼ãˆã‚‹
> - æ¬¡ã«ã€é’æœ¨å›ãŒ$C$ä»¥ä¸Š$D$ä»¥ä¸‹ã®å¥½ããªæ•´æ•°ã‚’é¸ã¶
> - äºŒäººã®é¸ã‚“ã æ•´æ•°ã®å’ŒãŒç´ æ•°ãªã‚‰é’æœ¨å›ã®å‹ã¡ã€ãã†ã§ãªã‘ã‚Œã°é«˜æ©‹å›ã®å‹ã¡
>
> äºŒäººãŒæœ€é©ãªæˆ¦ç•¥ã‚’å–ã‚‹ã¨ãã€ã©ã¡ã‚‰ãŒå‹ã¡ã¾ã™ã‹ï¼Ÿ

### åˆ¶ç´„

> - $1 \leq A \leq B \leq 100$
> - $1 \leq C \leq D \leq 100$
> - å…¥åŠ›ã«å«ã¾ã‚Œã‚‹å€¤ã¯å…¨ã¦æ•´æ•°ã§ã‚ã‚‹

## è§£ç­”ä¾‹

### é«˜æ©‹å›ã®å‹åˆ©æ¡ä»¶ã‚’è€ƒãˆã‚‹

é«˜æ©‹å›ã®å‹åˆ©æ¡ä»¶ã¯ã€é«˜æ©‹å›ãŒé¸ã‚“ã æ•°ã¨ã€ãã®å¾Œã«é’æœ¨å›ãŒé¸ã‚“ã æ•°ã®å’ŒãŒç´ æ•°ã«ãªã‚‰ãªã„ã“ã¨ã§ã™ã€‚

ã—ãŸãŒã£ã¦ã€é’æœ¨å›ãŒå‡ºã›ã‚‹æ•°ã®ã†ã¡ã©ã‚Œã‚’é’æœ¨å›ãŒé¸ã‚“ã§ã‚‚å’ŒãŒç´ æ•°ã«ãªã‚‰ãªã„æ•°ã‚’é«˜æ©‹å›ãŒ 1 ã¤ã§ã‚‚æŒã£ã¦ã„ã‚‹ã¨ãã€é«˜æ©‹å›ã¯å¿…ãšå‹ã¤ã“ã¨ãŒã§ãã¾ã™ã€‚
é€†ã«ã€ãã®ã‚ˆã†ãªæ•°ã‚’é«˜æ©‹å›ãŒ 1 ã¤ã‚‚æŒã£ã¦ã„ãªã„ã¨ãã€é«˜æ©‹å›ãŒã©ã®æ•°ã‚’å‡ºãã†ã¨ã‚‚ã€é’æœ¨å›ã¯å’ŒãŒç´ æ•°ã«ãªã‚‹ã‚ˆã†ãªæ•°ã‚’å‡ºã—ã¦å‹åˆ©ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®å•é¡Œã§ã¯åˆ¶ç´„ãŒç·©ã„ã®ã§ã€ã‚ã‚Šå¾—ã‚‹æ•°ã‚’å…¨æ¢ç´¢ã—ã¦è§£ã‚’æ±‚ã‚ã¾ã™ã€‚

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè£…ä¾‹

C++ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ å®Ÿè£…ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚
ä»Šå›ã®å•é¡Œã¯åˆ¶ç´„ãŒéå¸¸ã«ç·©ã„ã®ã§ã€å…¨æ¢ç´¢ã®éƒ½åº¦ç´ æ•°åˆ¤å®šã‚’è¡Œã£ã¦ã‚‚ååˆ†é–“ã«åˆã„ã¾ã™ãŒã€ã“ã“ã§ã¯ã‚¨ãƒ©ãƒˆã‚¹ãƒ†ãƒã‚¹ã®ç¯©ã‚’ä½¿ã£ã¦é«˜é€Ÿã«ç´ æ•°åˆ¤å®šã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚

```cpp:d.cpp
#include <iostream>
#include <vector>
#include <string>
#include <algorithm>

class EratosthenesSieve {
 public:
  int64_t Number_;
  std::vector<bool> is_prime_;
  std::vector<int64_t> primes_;
  std::vector<int64_t> minimum_factor_;

  EratosthenesSieve(int64_t N)
      : Number_(N),
        is_prime_(N + 1, true),
        primes_(0),
        minimum_factor_(N + 1, -1) {
    is_prime_.at(1) = false;
    minimum_factor_.at(1) = 1;

    for (int64_t p = 2; p <= N; p++) {
      if (!is_prime_.at(p)) continue;

      primes_.push_back(p);
      minimum_factor_.at(p) = p;

      for (int64_t q = p * 2; q <= N; q += p) {
        is_prime_.at(q) = false;

        if (minimum_factor_.at(q) == -1) {
          minimum_factor_.at(q) = p;
        }
      }
    }
  }

  std::vector<std::pair<int64_t, int64_t>> factorize(int64_t N) {
    if (N > Number_) return {};
    std::vector<std::pair<int64_t, int64_t>> result;
    while (N > 1) {
      int64_t p = minimum_factor_.at(N);
      int64_t exp = 0;

      while (minimum_factor_.at(N) == p) {
        N /= p;
        exp++;
      }
      result.push_back(std::make_pair(p, exp));
    }

    return result;
  }

  std::vector<int64_t> dividers(int64_t N) {
    if (N > Number_) return {};
    std::vector<int64_t> result = {1};

    auto primes = factorize(N);

    for (auto p : primes) {
      int64_t size = static_cast<int64_t>(result.size());
      for (int64_t i = 0; i < size; i++) {
        int64_t v = 1;
        for (int64_t j = 0; j < p.second; j++) {
          v *= p.first;
          result.push_back(result.at(i) * v);
        }
      }
    }

    std::sort(result.begin(), result.end());
    return result;
  }

  std::vector<int64_t> primes(void) { return primes_; }

  std::vector<bool> is_prime(void) { return is_prime_; }
};

int main() {
  int64_t A, B, C, D;
  std::cin >> A >> B >> C >> D;

  // 2ã¤ã®æ•°ã®å’Œã¯200ã‚’è¶…ãˆãªã„ã®ã§1000ã¾ã§ã®ç¯©ã‚’ä½œã£ã¦ãŠã‘ã°ååˆ†
  EratosthenesSieve es(1000);
  auto is_prime = es.is_prime();

  // é«˜æ©‹å›ãŒå¿…ãšå‹ã¦ã‚‹ã‹ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°å¤‰æ•°
  bool flag = false;
  // é«˜æ©‹å›ãŒå‡ºã›ã‚‹å…¨ã¦ã®æ•°ã«ã¤ã„ã¦æ¢ç´¢
  for (int64_t i = A; i <= B; i++) {
    // é«˜æ©‹å›ãŒå‡ºã—ãŸæ•°iã«å¯¾ã—ã¦é’æœ¨å›ãŒå‹ã¤æ‰‹ãŒã‚ã‚‹ã‹ã©ã†ã‹ã‚’è¡¨ã™ãƒ•ãƒ©ã‚°å¤‰æ•°
    bool aoki = false;
    // é’æœ¨å›ãŒå‡ºã›ã‚‹å…¨ã¦ã®æ•°ã«ã¤ã„ã¦æ¢ç´¢
    for (int64_t j = C; j <= D; j++) {
      // å’Œã‚’è¨ˆç®—
      int64_t sum = i + j;

      // ç´ æ•°åˆ¤å®š
      if (is_prime.at(sum)) {
        aoki = true;
      }
    }

    // é’æœ¨å›ãŒã©ã†ã‚„ã£ã¦ã‚‚å‹ã¦ãªã„iãŒã‚ã‚‹ãªã‚‰ã€é«˜æ©‹å›ã¯å¿…ãšå‹ã¦ã‚‹
    if (!aoki) flag = true;
  }

  // å‡ºåŠ›
  if (flag) {
    std::cout << "Takahashi" << std::endl;
  } else {
    std::cout << "Aoki" << std::endl;
  }

  return 0;
}
```

å®Ÿéš›ã«æå‡ºã—ãŸã‚³ãƒ¼ãƒ‰ã¯[ã“ã¡ã‚‰](https://atcoder.jp/contests/abc239/submissions/29455427)ã€‚
