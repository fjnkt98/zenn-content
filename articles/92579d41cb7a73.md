---
title: "Zig 0.14.0 æ–‡å­—åˆ—æ“ä½œã®ãƒ¡ãƒ¢"
emoji: "ğŸª¢"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["zig"]
published: false
---

## ç’°å¢ƒ

- Zig 0.14.0

## æ–‡å­—åˆ—ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

[std.fmt.allocPrint](https://ziglang.org/documentation/0.14.0/std/#std.fmt.allocPrint)ã‚’ä½¿ã†ã€‚
ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ–‡å­—åˆ—ã«ã¤ã„ã¦ã¯ https://ziglang.org/documentation/0.14.0/std/#std.fmt.format ã«è¨˜è¼‰ãŒã‚ã‚‹ã€‚

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const s = try std.fmt.allocPrint(allocator, "hexadecimal: {x}, string: {s}, floating point: {e}, decimal: {d}, integer with binary: {b}, integer with octal: {o}", .{ 255, "foo", 3.14, 123, 123, 123 });
    defer allocator.free(s);

    std.debug.print("{s}\n", .{s});
}
```

```text:å‡ºåŠ›
hexadecimal: ff, string: foo, floating point: 3.14e0, decimal: 123, integer with binary: 1111011, integer with octal: 173
```

å‚è€ƒ: https://zenn.dev/ousttrue/books/b2ec4e93bdc5c4/viewer/fe2023

## æ–‡å­—åˆ—ã®ã‚³ãƒ”ãƒ¼

ã‚³ãƒ”ãƒ¼å…ƒã®æ–‡å­—åˆ—ã¨åŒã˜é•·ã•ã®ã‚¹ãƒ©ã‚¤ã‚¹ã‚’ã‚¢ãƒ­ã‚±ãƒ¼ãƒˆã—ã€[@memcpy](https://ziglang.org/documentation/0.14.0/#memcpy)ã§ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const s1 = "foo bar baz qux";
    const s2 = try allocator.alloc(u8, s1.len);
    defer allocator.free(s2);

    @memcpy(s2, s1);

    std.debug.print("s1: {s}\ns2: {s}\n", .{ s1, s2 });
}
```

```text:å‡ºåŠ›
s1: foo bar baz qux
s2: foo bar baz qux
```

[std.mem.copyForwards](https://ziglang.org/documentation/0.14.0/std/#std.mem.copyForwards)ã§ã‚‚å¯ã€‚(é•ã„ãŒã‚ã‹ã£ã¦ãªã„)

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const s1 = "foo bar baz qux";
    const s2 = try allocator.alloc(u8, s1.len);
    defer allocator.free(s2);

    std.mem.copyForwards(u8, s2, s1);

    std.debug.print("s1: {s}\ns2: {s}\n", .{ s1, s2 });
}
```

```text:å‡ºåŠ›
s1: foo bar baz qux
s2: foo bar baz qux
```

## 1æ–‡å­—ãšã¤ã‚¤ãƒ†ãƒ¬ãƒ¼ãƒˆã™ã‚‹

[std.unicode.Utf8View](https://ziglang.org/documentation/0.14.0/std/#std.unicode.Utf8View)ã‚’ä½¿ã†ã€‚

```zig
const std = @import("std");

pub fn main() !void {
    const s = "ãƒãƒ­ãƒ¼ã€ãƒ¯ãƒ¼ãƒ«ãƒ‰ï¼";
    var view = try std.unicode.Utf8View.init(s);

    var iter = view.iterator();
    while (iter.nextCodepoint()) |c| {
        std.debug.print("{u}\n", .{c});
    }
}
```

```text:å‡ºåŠ›
ãƒ
ãƒ­
ãƒ¼
ã€
ãƒ¯
ãƒ¼
ãƒ«
ãƒ‰
ï¼
```

## æ–‡å­—åˆ—ã®çµåˆ(concat)

[std.mem.concat](https://ziglang.org/documentation/0.14.0/std/#std.mem.concat)ã‚’ä½¿ã†ã€‚

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const s1 = "foo";
    const s2 = "bar";
    const s3 = "baz";

    const s = try std.mem.concat(allocator, u8, &[_][]const u8{ s1, s2, s3 });
    defer allocator.free(s);

    std.debug.print("{s}\n", .{s});
}
```

```text:å‡ºåŠ›
foobarbaz
```

## æ–‡å­—åˆ—ã®çµåˆ(join)

[std.mem.join](https://ziglang.org/documentation/0.14.0/std/#std.mem.join)ã‚’ä½¿ã†ã€‚

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const s1 = "foo";
    const s2 = "bar";
    const s3 = "baz";

    const s = try std.mem.join(allocator, ", ", &[_][]const u8{ s1, s2, s3 });
    defer allocator.free(s);

    std.debug.print("{s}\n", .{s});
}
```

```text:å‡ºåŠ›
foo, bar, baz
```

## æ–‡å­—åˆ—ã®ãƒªã‚¹ãƒˆã®æ§‹ç¯‰

æ–‡å­—åˆ—ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ArrayListã«æ ¼ç´ã™ã‚‹éš›ã¯éƒ½åº¦ãƒ¡ãƒ¢ãƒªã‚’ç¢ºä¿ã™ã‚‹ã€‚
æœ€å¾Œã«å„è¦ç´ ã‚’èµ°æŸ»ã—ã¦é–‹æ”¾ã™ã‚‹ã€‚(ã‚„ã‚Šæ–¹ã‚ã£ã¦ã‚“ã®ã‹ãªï¼Ÿ)

```zig
const std = @import("std");

pub fn main() !void {
    var gpa = std.heap.GeneralPurposeAllocator(.{}){};
    const allocator = gpa.allocator();

    const keywords = [_][]const u8{
        "foo",
        "bar",
        "baz",
    };

    var data = std.ArrayList([]const u8).init(allocator);
    defer data.deinit();

    for (keywords) |k| {
        const s: []u8 = try allocator.alloc(u8, k.len);
        @memcpy(s, k);
        try data.append(s);
    }
    defer {
        for (data.items) |item| {
            allocator.free(item);
        }
    }

    for (data.items) |v| {
        std.debug.print("{s}\n", .{v});
    }
}
```

```text:å‡ºåŠ›
foo
bar
baz
```
