---
title: "ABC271 C - Manga Pythonè§£ç­”ä¾‹"
emoji: "ğŸ“•"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ç«¶æŠ€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°", "ç«¶ãƒ—ãƒ­", "python", "AtCoder"]
published: true
---

AtCoder Beginner Contest 271 C - Mangaã‚’Pythonã§è§£ãã¾ã™ã€‚

## å•é¡Œ

å•é¡Œæ–‡ã‚’[AtCoderã®ãƒšãƒ¼ã‚¸](https://atcoder.jp/contests/abc271/tasks/abc271_c)ã‚ˆã‚Šå¼•ç”¨ã—ã¾ã™ã€‚

> ### å•é¡Œæ–‡
>
> é«˜æ©‹å›ã¯å…¨$10^9$å·»ã®æ¼«ç”»ã€ã™ã¬ã‘å›ã€ã‚’èª­ã‚€ã“ã¨ã«ã—ã¾ã—ãŸã€‚  
> åˆã‚ã€é«˜æ©‹å›ã¯ã€ã™ã¬ã‘å›ã€ã®å˜è¡Œæœ¬ã‚’$N$å†ŠæŒã£ã¦ã„ã¾ã™ã€‚$i$ç•ªç›®ã®å˜è¡Œæœ¬ã¯$a_i$å·»ã§ã™ã€‚
>
> é«˜æ©‹å›ã¯ã€ã™ã¬ã‘å›ã€ã‚’**èª­ã¿å§‹ã‚ã‚‹å‰ã«é™ã‚Š**æ¬¡ã®æ“ä½œã‚’$0$å›ä»¥ä¸Šä½•åº¦ã§ã‚‚ç¹°ã‚Šè¿”ã›ã¾ã™ã€‚
>
> - ç¾åœ¨æŒã£ã¦ã„ã‚‹å˜è¡Œæœ¬ãŒ$1$å†Šä»¥ä¸‹ã®å ´åˆã€ä½•ã‚‚ã—ãªã„ã€‚ãã†ã§ãªã„å ´åˆã€ç¾åœ¨æŒã£ã¦ã„ã‚‹å˜è¡Œæœ¬ã‹ã‚‰$2$å†Šã‚’é¸ã‚“ã§å£²ã‚Šã€ä»£ã‚ã‚Šã«å¥½ããªå·»ã‚’é¸ã‚“ã§$1$å†Šè²·ã†
>
> ãã®å¾Œã€é«˜æ©‹å›ã¯ã€ã™ã¬ã‘å›ã€ã‚’$1$å·»ã€$2$å·»ã€$3$å·»ã€$\ldots$ã¨é †ç•ªã«èª­ã¿ã¾ã™ã€‚ãŸã ã—ã€æ¬¡ã«èª­ã‚€ã¹ãå·»ã‚’æŒã£ã¦ã„ãªã„çŠ¶æ…‹ã«ãªã£ãŸå ´åˆã€(ä»–ã®å·»ã‚’æŒã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ã«é–¢ã‚ã‚‰ãš)ãã®æ™‚ç‚¹ã§ã€ã™ã¬ã‘å›ã€ã‚’èª­ã‚€ã®ã‚’ã‚„ã‚ã¾ã™ã€‚
>
> é«˜æ©‹å›ãŒã€ã™ã¬ã‘å›ã€ã‚’æœ€å¤§ã§ä½•å·»ã¾ã§èª­ã‚ã‚‹ã‹ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚ãŸã ã—ã€$1$å·»ã‚’èª­ã‚ãªã„å ´åˆã®ç­”ãˆã¯$0$ã¨ã—ã¾ã™ã€‚
>
> ### åˆ¶ç´„
>
> - $1 \leq N \leq 3 \times 10^5$
> - $1 \leq a_i \leq 10^9$
> - å…¥åŠ›ã¯ã™ã¹ã¦æ•´æ•°

## è§£ç­”ä¾‹

### å…ˆé ­ã‹ã‚‰é †ã«æ„šç›´ã«æ±‚ã‚ã‚‹

èª­ã¿å§‹ã‚ã‚‹ã®ã¯1å·»ã‹ã‚‰ã§ã€ãã“ã‹ã‚‰é †ç•ªã«2, 3, ...ã¨èª­ã¿é€²ã‚ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
é€†ã«ã€å¾Œã®æ–¹ã®å·»ã‚’ã„ãã‚‰æŒã£ã¦ã„ã¦ã‚‚ã€å…ˆé ­ã®æ–¹ã§æŠœã‘ãŒã‚ã‚Œã°å…ˆã¸ã¯é€²ã‚ã¾ã›ã‚“ã€‚

ãã®ãŸã‚ã€å¾Œã‚ã®æ–¹ã®å·»ã‚’ä½¿ã£ã¦ç©´ã‚’åŸ‹ã‚ãªãŒã‚‰å…ˆé ­ã‹ã‚‰è¦‹ã¦ã„ãã€ã¨ã„ã†æ–¹æ³•ãŒæœ€é©ã§ã™ã€‚

å…·ä½“çš„ã«ã¯ã€

- æ¬¡ã«è¦‹ã‚‹å·»ã®æƒ…å ±ã‚’ä¿æŒã—ã¦ãŠãã€‚æœ€åˆã¯1ã‹ã‚‰å§‹ã¾ã‚‹ã€‚
- æŒã£ã¦ã„ã‚‹å·»ã®ç•ªå·ã‚’æ˜‡é †ã«ä¸¦ã¹ã€ä¸¡ç«¯ã‚­ãƒ¥ãƒ¼ã«å…¨ã¦æ ¼ç´ã™ã‚‹ã€‚
- ä¸¡ç«¯ã‚­ãƒ¥ãƒ¼ã®å…ˆé ­ã‚’è¦‹ã‚‹ã€‚
  - æ¬¡ã«è¦‹ã‚‹å·»ãŒå…ˆé ­ã«ã‚ã‚Œã°ã€ãã‚Œã‚’1ã¤å–ã‚Šé™¤ãã€‚
  - ã‚‚ã—ç„¡ã‘ã‚Œã°ã€å¾Œã‚ã®æ–¹ã®2ã¤ã‚’å–ã‚Šé™¤ãã€‚
- èª­ã‚ã‚‹å·»ãŒç„¡ããªã‚‹ã¾ã§ãƒ«ãƒ¼ãƒ—ã™ã‚‹ã€‚

ã¨ã„ã†æ„Ÿã˜ã«è§£ãã¾ã™ã€‚

ãŸã ã—ã€å…ˆé ­ã®æ–¹ã®å·»ãŒé‡è¤‡ã—ã¦ã„ã‚‹ã¨ãã¯æ³¨æ„ã§ã™ã€‚ä¾‹ãˆã°ã€

```
5
1 2 2 2 3
```

ã¨ã„ã†å…¥åŠ›ãŒä¸ãˆã‚‰ã‚ŒãŸã¨ãã€é‡è¤‡ã—ã¦ã„ã‚‹2å·»ã®ã†ã¡2ã¤ã‚’å£²ã£ã¦4å·»ã‚’æ‰‹ã«å…¥ã‚Œã‚Œã°ã€åˆè¨ˆ4å†Šèª­ã‚€ã“ã¨ãŒã§ãã¾ã™ãŒã€ä¸Šè¿°ã®å‡¦ç†ã‚’è¡Œã†ã¨`3`ã¨ã„ã†çµæœãŒè¿”ã£ã¦ãã¾ã™ã€‚

ã“ã‚Œã‚’é˜²ãã«ã¯ã€ãƒªã‚¹ãƒˆã®ä¸­ã§ä¸€æ„ãªæ•°å­—ã‚’é›†ã‚ã¦ãƒªã‚¹ãƒˆã®å…ˆé ­ã«æŒã£ã¦ãã¦ã€ãã‚Œã‚’ä¸¡ç«¯ã‚­ãƒ¥ãƒ¼ã«ã™ã‚Œã°è‰¯ã„ã§ã™ã€‚
ä¸Šã®ä¾‹ã§è¨€ã†ã¨ã€

```
1 2 2 2 3
â†“
1 2 3 2 2
```

ã®ã‚ˆã†ã«ä¸¦ã¹æ›¿ãˆã¾ã™ã€‚

ã‚½ãƒ¼ãƒˆã«$\mathcal{O}(N\log{N})$ã€å‰å‡¦ç†ã«$\mathcal{O}(N)$ã€æœ¬å‡¦ç†ã«$\mathcal{O}(N)$ã‹ã‹ã‚‹ã®ã§ã€ç·ã˜ã¦$\mathcal{O}(N\log{N})$ã§è§£ã‘ã¾ã™ã€‚

### å®Ÿè£…ä¾‹

Pythonã«ã‚ˆã‚‹å®Ÿè£…ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã—ã¾ã™ã€‚

```python:c.py
from typing import *
import collections

def main():
    # å…¥åŠ›å—ã‘å–ã‚Š
    N: int = int(input())
    # Aã¯å—ã‘å–ã£ãŸæ®µéšã§ã‚½ãƒ¼ãƒˆã—ã¦ãŠã
    A: List[int] = sorted(list(map(int, input().split())))

    # ä¸€æ„ãªæ•°å€¤ã ã‘ã‚’é›†ã‚ã‚‹ãƒªã‚¹ãƒˆB
    B: List[int] = []
    # é‡è¤‡ã—ãŸä½™ã‚Šã‚’é›†ã‚ã‚‹ãƒªã‚¹ãƒˆC
    C: List[int] = []
    # æ—¢ã«ç¾ã‚ŒãŸæ•°å€¤ã‚’è¨˜éŒ²ã—ã¦ãŠãé›†åˆS
    S: Set[int] = set()
    # æ˜‡é †ã«ã‚½ãƒ¼ãƒˆã—ãŸãƒªã‚¹ãƒˆAã‚’é †ã«è¦‹ã¦ã„ã
    for a in A:
        # æ—¢ã«è¦ç´ aãŒç¾ã‚Œã¦ã„ãŸãªã‚‰ã€Cã«æ ¼ç´ã™ã‚‹
        if a in S:
            C.append(a)
        else:
            # ãã†ã§ãªã„ãªã‚‰ã€Bã«æ ¼ç´ã™ã‚‹
            B.append(a)
            S.add(a)

    # Bã®å¾Œã‚ã«Cã‚’çµåˆã™ã‚‹
    B.extend(C)
    # Bã‚’å…ƒã«ä¸¡ç«¯ã‚­ãƒ¥ãƒ¼ã‚’ä½œã‚‹
    D = collections.deque(B)

    # æ¬¡ã«è¦‹ã‚‹å·»ã®æ•°å€¤ã‚’ä¿æŒã™ã‚‹å¤‰æ•°current
    current: int = 1
    # ç­”ãˆ
    answer: int = 0
    # ã‚­ãƒ¥ãƒ¼ãŒç©ºã«ãªã‚‹ã¾ã§ç¹°ã‚Šè¿”ã™
    while D:
        # ã‚­ãƒ¥ãƒ¼ã®å…ˆé ­ãŒã€æ¬¡ã«è¦‹ã‚‹å·»ãªã‚‰ã°ãã‚Œã‚’1ã¤å–ã‚Šé™¤ã
        if D[0] == current:
            D.popleft()
            answer += 1
            current += 1
        else:
            # ãã†ã§ãªã„å ´åˆã€å¾Œã‚ã®2å†Šã‚’å£²ã£ã¦ç›®çš„ã®å·»ã‚’å…¥æ‰‹ã—ã€ãã‚Œã‚’èª­ã‚€
            if len(D) >= 2:
                D.pop()
                D.pop()
                answer += 1
                current += 1
            else:
                # å£²ã‚‹æœ¬ãŒç„¡ã‘ã‚Œã°ãã“ã§çµ‚äº†ã™ã‚‹
                break

    # è§£ç­”å‡ºåŠ›
    print(answer)


if __name__ == "__main__":
    main()
```

å®Ÿéš›ã®æå‡ºã¯[ã“ã¡ã‚‰](https://atcoder.jp/contests/abc271/submissions/35299251)ã€‚
